**PHASE FIVE: CREATED TABLES**

-- 7. CREATE TABLES
--------------------------------------------------------------------------------

CREATE TABLE REGION (
    Region_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RegionName VARCHAR2(100) NOT NULL,
    Location VARCHAR2(150),
    Description VARCHAR2(300)
);

CREATE TABLE MINERALS (
    Mineral_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MineralName VARCHAR2(100) NOT NULL,
    Category VARCHAR2(80)
);

CREATE TABLE SITES (
    Site_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Region_id NUMBER NOT NULL,
    SiteName VARCHAR2(100) NOT NULL,
    Depth NUMBER,
    FOREIGN KEY (Region_id) REFERENCES REGION(Region_id)
);

CREATE INDEX IDX_SITES_REGION ON SITES(Region_id);

CREATE TABLE FINDINGS (
    Finding_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Site_id NUMBER NOT NULL,
    Mineral_id NUMBER NOT NULL,
    Quantity NUMBER,
    FindingDate DATE,
    FOREIGN KEY (Site_id) REFERENCES SITES(Site_id),
    FOREIGN KEY (Mineral_id) REFERENCES MINERALS(Mineral_id)
);

CREATE INDEX IDX_FINDINGS_SITE ON FINDINGS(Site_id);
CREATE INDEX IDX_FINDINGS_MINERAL ON FINDINGS(Mineral_id);

CREATE TABLE SURVEYOR (
    Surveyor_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FullName VARCHAR2(100) NOT NULL,
    Email VARCHAR2(100)
);

CREATE TABLE REPORT (
    Report_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Site_id NUMBER NOT NULL,
    Surveyor_id NUMBER NOT NULL,
    ReportDate DATE,
    Summary CLOB,
    FOREIGN KEY (Site_id) REFERENCES SITES(Site_id),
    FOREIGN KEY (Surveyor_id) REFERENCES SURVEYOR(Surveyor_id)
);

CREATE INDEX IDX_REPORT_SITE ON REPORT(Site_id);

CREATE TABLE AUDITLOG (
    Audit_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TableName VARCHAR2(50),
    Operation VARCHAR2(10),
    TimeStamp DATE,
    UserName VARCHAR2(50)
);

CREATE INDEX IDX_AUDITLOG_TIME ON AUDITLOG(TimeStamp);

