-- 7. CREATE TABLES
--------------------------------------------------------------------------------

CREATE TABLE REGION (
    Region_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RegionName VARCHAR2(100) NOT NULL,
    Location VARCHAR2(150),
    Description VARCHAR2(300)
);

CREATE TABLE MINERALS (
    Mineral_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MineralName VARCHAR2(100) NOT NULL,
    Category VARCHAR2(80)
);

CREATE TABLE SITES (
    Site_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Region_id NUMBER NOT NULL,
    SiteName VARCHAR2(100) NOT NULL,
    Depth NUMBER,
    FOREIGN KEY (Region_id) REFERENCES REGION(Region_id)
);

CREATE INDEX IDX_SITES_REGION ON SITES(Region_id);

CREATE TABLE FINDINGS (
    Finding_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Site_id NUMBER NOT NULL,
    Mineral_id NUMBER NOT NULL,
    Quantity NUMBER,
    FindingDate DATE,
    FOREIGN KEY (Site_id) REFERENCES SITES(Site_id),
    FOREIGN KEY (Mineral_id) REFERENCES MINERALS(Mineral_id)
);

CREATE INDEX IDX_FINDINGS_SITE ON FINDINGS(Site_id);
CREATE INDEX IDX_FINDINGS_MINERAL ON FINDINGS(Mineral_id);

CREATE TABLE SURVEYOR (
    Surveyor_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FullName VARCHAR2(100) NOT NULL,
    Email VARCHAR2(100)
);

CREATE TABLE REPORT (
    Report_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Site_id NUMBER NOT NULL,
    Surveyor_id NUMBER NOT NULL,
    ReportDate DATE,
    Summary CLOB,
    FOREIGN KEY (Site_id) REFERENCES SITES(Site_id),
    FOREIGN KEY (Surveyor_id) REFERENCES SURVEYOR(Surveyor_id)
);

CREATE INDEX IDX_REPORT_SITE ON REPORT(Site_id);

CREATE TABLE AUDITLOG (
    Audit_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TableName VARCHAR2(50),
    Operation VARCHAR2(10),
    TimeStamp DATE,
    UserName VARCHAR2(50)
);

CREATE INDEX IDX_AUDITLOG_TIME ON AUDITLOG(TimeStamp);

INSERT INTO REGION VALUES (DEFAULT,'North Valley','Rwanda','Mountain mineral zone');
INSERT INTO REGION VALUES (DEFAULT,'East Ridge','Rwanda','Dry mineral belt');
INSERT INTO REGION VALUES (DEFAULT,'South Basin','Rwanda','Sedimentary zone');
INSERT INTO REGION VALUES (DEFAULT,'West Highlands','Rwanda','High altitude minerals');
INSERT INTO REGION VALUES (DEFAULT,'Central Plains','Rwanda','Mixed mineral deposits');
INSERT INTO REGION VALUES (DEFAULT,'Lake Zone','Rwanda','Alluvial deposits');
INSERT INTO REGION VALUES (DEFAULT,'Volcanic Belt','Rwanda','Volcanic minerals');
INSERT INTO REGION VALUES (DEFAULT,'Forest Edge','Rwanda','Rare earth minerals');
INSERT INTO REGION VALUES (DEFAULT,'Border Zone','Rwanda','Exploration region');

COMMIT;

INSERT INTO MINERALS VALUES (DEFAULT,'Gold','Metal');
INSERT INTO MINERALS VALUES (DEFAULT,'Tin','Metal');
INSERT INTO MINERALS VALUES (DEFAULT,'Quartz','Crystal');
INSERT INTO MINERALS VALUES (DEFAULT,'Coltan','Metal');
INSERT INTO MINERALS VALUES (DEFAULT,'Iron Ore','Metal');
INSERT INTO MINERALS VALUES (DEFAULT,'Copper','Metal');
INSERT INTO MINERALS VALUES (DEFAULT,'Diamond','Gemstone');
INSERT INTO MINERALS VALUES (DEFAULT,'Limestone','Industrial');
INSERT INTO MINERALS VALUES (DEFAULT,'Nickel','Metal');

COMMIT;

INSERT INTO SITES VALUES (DEFAULT,1,'NV Site A',120);
INSERT INTO SITES VALUES (DEFAULT,2,'ER Site B',200);
INSERT INTO SITES VALUES (DEFAULT,3,'SB Site C',150);
INSERT INTO SITES VALUES (DEFAULT,4,'WH Site D',300);
INSERT INTO SITES VALUES (DEFAULT,5,'CP Site E',180);
INSERT INTO SITES VALUES (DEFAULT,6,'LZ Site F',90);
INSERT INTO SITES VALUES (DEFAULT,7,'VB Site G',220);
INSERT INTO SITES VALUES (DEFAULT,8,'FE Site H',260);
INSERT INTO SITES VALUES (DEFAULT,9,'BZ Site I',140);

COMMIT;

INSERT INTO SURVEYOR VALUES (DEFAULT,'Daniel Kirenga','daniel@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Alice Uwimana','alice@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'John Mugisha','john@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Grace Mukamana','grace@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Eric Nshuti','eric@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Pauline Ingabire','pauline@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Samuel Habimana','samuel@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Linda Mutoni','linda@mining.org');
INSERT INTO SURVEYOR VALUES (DEFAULT,'Patrick Karegeya','patrick@mining.org');

COMMIT;

INSERT INTO FINDINGS VALUES (DEFAULT,1,1,50,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,2,2,70,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,3,3,40,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,4,4,60,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,5,5,90,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,6,6,30,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,7,7,20,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,8,8,110,SYSDATE);
INSERT INTO FINDINGS VALUES (DEFAULT,9,9,55,SYSDATE);

COMMIT;

INSERT INTO REPORT VALUES (DEFAULT,1,1,SYSDATE,'Initial exploration report');
INSERT INTO REPORT VALUES (DEFAULT,2,2,SYSDATE,'Mineral quality assessment');
INSERT INTO REPORT VALUES (DEFAULT,3,3,SYSDATE,'Depth and quantity analysis');
INSERT INTO REPORT VALUES (DEFAULT,4,4,SYSDATE,'Environmental impact summary');
INSERT INTO REPORT VALUES (DEFAULT,5,5,SYSDATE,'Production potential review');
INSERT INTO REPORT VALUES (DEFAULT,6,6,SYSDATE,'Surveyor observations');
INSERT INTO REPORT VALUES (DEFAULT,7,7,SYSDATE,'Geological mapping report');
INSERT INTO REPORT VALUES (DEFAULT,8,8,SYSDATE,'Economic feasibility');
INSERT INTO REPORT VALUES (DEFAULT,9,9,SYSDATE,'Final recommendation');

COMMIT;

INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-01-01','New Year');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-02-01','National Day');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-04-07','Genocide Memorial');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-05-01','Labour Day');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-07-04','Liberation Day');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-08-15','Assumption Day');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-09-25','Unity Day');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-12-25','Christmas');
INSERT INTO PUBLIC_HOLIDAYS VALUES (DEFAULT,DATE '2025-12-31','Year End');

COMMIT;

INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','INSERT','FINDINGS',SYSDATE,'ALLOWED','Weekend allowed');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','UPDATE','REPORT',SYSDATE,'DENIED','WEEKDAY');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','DELETE','FINDINGS',SYSDATE,'DENIED','HOLIDAY');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','INSERT','REPORT',SYSDATE,'ALLOWED','Weekend allowed');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','UPDATE','FINDINGS',SYSDATE,'DENIED','WEEKDAY');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','INSERT','REPORT',SYSDATE,'ALLOWED','Weekend allowed');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','DELETE','REPORT',SYSDATE,'DENIED','HOLIDAY');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','INSERT','FINDINGS',SYSDATE,'ALLOWED','Weekend allowed');
INSERT INTO BUSINESS_AUDIT_LOG VALUES (DEFAULT,'PROJECT_ADMIN','UPDATE','REPORT',SYSDATE,'DENIED','WEEKDAY');

COMMIT;
